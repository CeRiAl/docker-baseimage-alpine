#!/usr/bin/with-contenv bash

PUID=${PUID:-911}
PGID=${PGID:-911}
PGIDS=${PGIDS}

usermod -o -u "$PUID" abc
groupmod -o -g "$PGID" abc
for ADD_GID in $PGIDS; do
  groupadd -o -g $ADD_GID "g-$ADD_GID"
  usermod -a -G "g-$ADD_GID" abc
done

chown abc:abc /app
chown abc:abc /home/abc

echo '
-------------------------------------------------------------------------------
                                  _____                     ___________
     __________________  ___________  /____________________ __  /___  /_
     _  ___/_  ___/_  / / /__  __ \  __/  __ \__  __ \  __ `/  __/_  __ \
     / /__ _  /   _  /_/ /__  /_/ / /_ / /_/ /_  /_/ / /_/ // /_ _  / / /
     \___/ /_/    _\__, / _  .___/\__/ \____/_  .___/\__,_/ \__/ /_/ /_/
                  /____/  /_/                /_/

-------------------------------------------------------------------------------

UID/GIDS
-------------------------------------'
echo "
User uid:    $(id -u abc)
User gids:   $(id -G abc)
-------------------------------------
"
